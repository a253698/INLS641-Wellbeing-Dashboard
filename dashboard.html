<html>
  <head>
    <title>INLS641 Final Project</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="asset/favicon.ico" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-uWxY/CJNBR+1zjPWmfnSnVxwRheevXITnMqoEIeG1LJrdI0GlVs/9cVSyPYXdcSF" crossorigin="anonymous"/>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Supermercado+One&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet"/>
    <link href="./index.css" rel="stylesheet" />

    <style> /* set the CSS */
      .bar { fill: steelblue; }
    </style>

  </head>

  <body>
    <nav class="navbar navbar-expand-lg bg-light shadow fixed-to navbar-dark bg-dark">
      <div class="container">
        <a
          class="navbar-brand"
          href="index.html"
          style="font-family: 'Supermercado One', cursive"
          >INLS641 Final Project</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarResponsive"
          aria-controls="navbarResponsive"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item" style="padding-right: 5px">
              <a class="nav-link" href="index.html">Report</a>
            </li>
            <li class="nav-item" style="padding-right: 5px">
              <a class="nav-link" href="dashboard.html">Well-being Dashboard</a>
            </li>
            <li class="nav-item" style="padding-right: 5px">
              <a class="nav-link" target="_blank" href="">Slide</a>
            </li>
            <li class="navbar-brand" style="padding-left: 5px">
              <a
                class="navbar-brand"
                target="_blank"
                href="https://github.com/VisDesignStudies/module-three-design-study-lite-chintseng"
              >
                <img
                  src="/asset/image/github.png"
                  width="30"
                  height="30"
                  alt=""
                />
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!--
    <div class="container" style="-top: 25px">
     
      </div>

-->
    <!-- <script type="text/javascript" src="https://d3js.org/d3.v7.min.js"></script> -->
    <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-kQtW33rZJAHjgefvhyyzcGF3C5TFyBQBA13V1RKPf4uH+bwyzQxZ6CmMZHmNBEfJ"
      crossorigin="anonymous">
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type='text/javascript'>

    //start of donut code  
    var data = [
          {name: "Not at all", val: 70},
          {name: "Low", val: 55},
          {name: "moderate", val: 110},
          {name: "high", val: 52},
          {name: "very high", val: 92},
      ];
      var w = 400,
          h = 400,
          r = Math.min(w, h) / 2,
          labelr = r + 30, // radius for label anchor
          color = d3.scaleOrdinal(d3.schemeCategory20),
          donut = d3.pie()
              .startAngle(-90 * (Math.PI/180))
              .endAngle(90 * (Math.PI/180))
          arc = d3.arc()
              .innerRadius(r * .6)
              .outerRadius(r);
      var vis = d3.select("body")
          .append("svg:svg")
          .data([data])
          .attr("width", w + 100)
          .attr("height", h);
      var arcs = vis.selectAll("g.arc")
          .data(donut.value(function (d) {
              return d.val
          }))
          .enter().append("svg:g")
          .attr("class", "arc")
          .attr("transform", "translate(" + (r + 30) + "," + r + ")");
      arcs.append("svg:path")
          .attr("fill", function (d, i) {
              return color(i);
          })
          .attr("d", arc);
      arcs.append("svg:text")
          .attr("transform", function (d) {
              var textWidth = getTextWidth(d.data.val.toString(), "Arial");
              return "translate(" + (arc.centroid(d)[0] - textWidth) + "," + arc.centroid(d)[1] + ")";
          })
          .attr("dy", ".35em")
          .attr("text-anchor", function (d) {
              // are we past the center?
              return (d.endAngle + d.startAngle) / 2 > Math.PI ?
                  "end" : "start";
          })
          .text(function (d) {
              return d.value.toFixed(2);
          });
      function getTextWidth(text, font) {
          var canvas = getTextWidth.canvas || (getTextWidth.canvas = document.createElement("canvas"));
          var context = canvas.getContext("2d");
          context.font = font;
          var metrics = context.measureText(text);
          return metrics.width;
      }
//end of dounut code

// bar chart code starts here
// Set graph margins and dimensions
var margin = {top: 20, right: 20, bottom: 30, left: 40},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;
    
    // Set ranges
    var x = d3.scaleBand()
              .range([0, width])
              .padding(0.1);
    var y = d3.scaleLinear()
              .range([height, 0]);
    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", 
              "translate(" + margin.left + "," + margin.top + ")");
    
    var bar_data = [
          {name: "A few times a year or less", amounts: 70},
          {name: "Once a month or less", amounts: 55},
          {name: "A few times a month", amounts: 110},
          {name: "Once a week", amounts: 52},
          {name: "A few times a week", amounts: 92},
          {name: "Everyday", amounts: 38}
      ];           

      // Format data
      bar_data.forEach(function(d) {
        d.amounts = +d.amounts;
      });
    
      // Scale the range of the data in the domains
      x.domain(bar_data.map(function(d) { return d.name; }));
      y.domain([0, d3.max(bar_data, function(d) { return d.amounts; })]);
    
      // Append rectangles for bar chart
      svg.selectAll(".bar")
          .data(bar_data)
        .enter().append("rect")
          .attr("class", "bar")
          .attr("x", function(d) { return x(d.name); })
          .attr("width", x.bandwidth())
          .attr("y", function(d) { return y(d.amounts); })
          .attr("height", function(d) { return height - y(d.amounts); });
    
      // Add x axis
      svg.append("g")
          .attr("transform", "translate(0," + height + ")")
          .call(d3.axisBottom(x));
    
      // Add y axis
      svg.append("g")
          .call(d3.axisLeft(y));

    </script>
  </body>
</html>
